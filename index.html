<!DOCTYPE html>
<html>
<head>
	<meta charset="uft8"/>
	<link href="main.css" rel="stylesheet" type="text/css" />
	<script src="pixi.js"></script>
	<script src="bakterie.js"></script>

</head>

<body>
	<h1>Bakterie Simulator</h1>
	<div id="koloniView" class="koloniView"></div>
	<script>
		/**
		 * BAKTERIE SIMULATOR
		 * @author Per-Henrik E.Kvalnes
		 *
		 *
		 **/
		var stage  = new PIXI.Stage(0x000000, true);
		stage.className = "koloniView";
		var width = 800;
		var height= 400;

		var renderer = PIXI.autoDetectRenderer(width,height);

		div = document.getElementById("koloniView")
		div.appendChild(renderer.view);
		div.style.width = width+"px";
		div.style.height= height+"px";
		requestAnimFrame( animate ); 

		/** plasser en bakterie pÃ¥ mitten **/	
		bakt = createBakterie( width/2, height/	2);

		stage.addChild(bakt);

		renderer.render(stage);

		function animate()
		{
			requestAnimFrame( animate );		

			for(i in stage.children)
			{
				b = stage.children[i];
				b.update(b);
			}
			renderer.render( stage );	
		}	

		function duplicate()
		{
			list = stage.children;
			MAX_BAKT = 250;
			if(list.length > MAX_BAKT)
			{
				alert("Maks bakterier: "+list.legnth);
				return;
			}
			if(list.length == 0)
			{
				x = renderer.view.width /2;
				y = renderer.view.height /2;
				bakt = createBakterie(x,y);
				stage.addChild(bakt);
				return;
			}
			for(i in list)
			{
				b = list[i];
			
				x = b.position.x;
				y = b.position.y;
		
			
				bakt = createBakterie(x,y);
				stage.addChild(bakt);
			}
			document.getElementById("antallLabel").innerHTML = "Antall bakterier: "+list.length;
		}	
	</script>
	<div class="button" onclick="duplicate()">Dupliser</div>
	<p id="antallLabel">En bakterie</p>
	<p>skrevet av Per-Henrik E.Kvalnes</p>

</body>
</html>
